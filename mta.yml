_schema-version: '3.1'
ID: selenium-automation-ci-cd
version: 1.0.0

modules:
  - name: selenium-tests
    type: custom
    path: .
    build-parameters:
      builder: custom
      commands:
        - python -m pip install -r requirements.txt
        - pytest tests/Test.py
    requires:
      - name: nodejs-buildpack
    parameters:
      memory: 512M
      disk-quota: 512M

resources:
  - name: nodejs-buildpack
    type: org.cloudfoundry.buildpack
    parameters:
      buildpack: python_buildpack

  - name: selenium-test-service
    type: org.cloudfoundry.managed-service
    parameters:
      service: test-service
      service-plan: standard

parameters:
  hcp-deployer:
    deploy-mode: html5-repo